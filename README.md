# geth-replay
Tool used to collect trace from [`tracer-geth`](https://github.com/Nangos/tracer-geth), utilizing the `debug` module of `geth` client.

## Configuration
### in `Makefile`:
- Set `datadir` to the directory that stores historical states and transaction records on the blockchain.
- Set `gethbin` to the path of the binary of the `geth` client (the binary should be built from the source code of `tracer-geth`).

### in `replay_batch.sh`:
- Set `datadir` the same as in `Makefile`.
- Set `gethbin` the same as in `Makefile`.
- Set `tracedir` to the directory used to store the raw traces that will be generated by the collector.

## Usage
- run `make run` in the command line window to launch the `geth` client.
- run `sh replay_batch.sh $1 $2 $3` in another command line window to start the collection process. (See below for details)
```
# replay_batch.sh replays blocks in the range [start, end) and generate raw traces
# feed sz blocks at once
# note: if (end-start) is not a multiple of sz, it runs beyond
# pre-requisite: make run in another console!

start=$1 # start block (inclusive)
end=$2 # end block (exclusive)
sz=$3 # batch size
```
